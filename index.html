<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NICE Prime-Factorization Challenge</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; line-height: 1.6; padding: 0 20px; }
    h1 { text-align: center; color: #2c3e50; }
    select, input, button { font-size: 1rem; padding: 0.5em; margin: 0.5em 0; }
    .number-display { font-size: 1.2rem; font-weight: bold; margin-top: 1em; }
    .result { margin-top: 1em; font-weight: bold; }
    blockquote { border-left: 4px solid #ccc; margin: 1em 0; padding-left: 1em; color: #555; }
    a { color: #2980b9; text-decoration: none; }
  </style>
</head>
<body>
  <h1>NICE Prime-Factorization Challenge</h1>

  <p><strong>About:</strong> Originally proposed by Rodriguez ~20 years ago as a method to test for nonlocal intelligence through prime factorization. Inspired by Andrew from the DMTx podcast <a href="https://www.youtube.com/watch?v=fDa_iH9R3mw" target="_blank">(watch here)</a>.</p>

  <blockquote>
    “All numbers have a unique set of prime factors… but it’s very difficult to do with large numbers.”<br>&mdash; Rodriguez
  </blockquote>

  <blockquote>
    “...we want to prove your existence. Here’s a very large number. Tell me what the unique prime factors are of this number.”<br>&mdash; Andrew (DMTx Podcast)
  </blockquote>

  <label for="difficulty">Choose difficulty (number of digits):</label><br>
  <select id="difficulty">
    <option value="2">2 digits</option>
    <option value="3">3 digits</option>
    <option value="4">4 digits</option>
    <option value="5">5 digits</option>
    <option value="6">6 digits</option>
  </select>
  <button id="startBtn">Start Challenge</button>

  <div class="number-display" id="numberDisplay"></div>

  <label for="factors">Enter prime factors (comma-separated):</label><br>
  <input type="text" id="factors" placeholder="e.g. 13,17" size="30" disabled />
  <button id="checkBtn" disabled>Check Answer</button>

  <div class="result" id="result"></div>

  <script>
    // Utility: trial division primality test
    function isPrime(n) {
      if (n < 2) return false;
      for (let i = 2; i <= Math.sqrt(n); i++) {
        if (n % i === 0) return false;
      }
      return true;
    }

    // Generate a random prime with given digit count
    function randomPrime(digits) {
      const min = Math.pow(10, digits - 1);
      const max = Math.pow(10, digits) - 1;
      while (true) {
        const candidate = Math.floor(Math.random() * (max - min + 1)) + min;
        if (isPrime(candidate)) return candidate;
      }
    }

    // Generate composite with specified total digits
    function generateComposite(totalDigits) {
      const d1 = Math.floor(totalDigits / 2);
      const d2 = totalDigits - d1;
      const p1 = randomPrime(d1);
      const p2 = randomPrime(d2);
      return { composite: p1 * p2, factors: [p1, p2].sort((a,b)=>a-b) };
    }

    let current = null;

    document.getElementById('startBtn').addEventListener('click', () => {
      const digits = parseInt(document.getElementById('difficulty').value, 10);
      current = generateComposite(digits);
      document.getElementById('numberDisplay').textContent = `Number: ${current.composite}`;
      document.getElementById('factors').disabled = false;
      document.getElementById('checkBtn').disabled = false;
      document.getElementById('result').textContent = '';
    });

    document.getElementById('checkBtn').addEventListener('click', () => {
      const input = document.getElementById('factors').value
        .split(',')
        .map(s => parseInt(s.trim(), 10))
        .filter(n => !isNaN(n))
        .sort((a,b)=>a-b);
      const correct = JSON.stringify(input) === JSON.stringify(current.factors);
      if (correct) {
        document.getElementById('result').textContent = '✅ Correct! Well done.';
      } else {
        document.getElementById('result').innerHTML = `❌ Incorrect. Correct factors are: ${current.factors.join(', ')}`;
      }
    });
  </script>
</body>
</html>
